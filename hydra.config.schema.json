{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "HYDRA Configuration",
  "description": "Configuration schema for HYDRA Launcher v4.0",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "description": "Config file version"
    },
    "ollama": {
      "type": "object",
      "description": "Ollama server configuration",
      "properties": {
        "host": {
          "type": "string",
          "format": "uri",
          "default": "http://localhost:11434",
          "description": "Ollama API host URL"
        },
        "defaultModel": {
          "type": "string",
          "default": "llama3.2",
          "description": "Default model to use for queries"
        },
        "fallbackModels": {
          "type": "array",
          "items": { "type": "string" },
          "default": ["mistral", "gemma2"],
          "description": "Fallback models if default is unavailable"
        },
        "startupTimeout": {
          "type": "integer",
          "minimum": 1000,
          "maximum": 60000,
          "default": 10000,
          "description": "Max time to wait for Ollama startup (ms)"
        },
        "healthCheckInterval": {
          "type": "integer",
          "minimum": 1000,
          "default": 5000,
          "description": "Interval between health checks (ms)"
        }
      }
    },
    "watchdog": {
      "type": "object",
      "description": "Watchdog mode configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Start in watchdog mode by default"
        },
        "checkInterval": {
          "type": "integer",
          "minimum": 5000,
          "maximum": 300000,
          "default": 30000,
          "description": "Health check interval in watchdog mode (ms)"
        },
        "maxRestarts": {
          "type": "integer",
          "minimum": 1,
          "maximum": 20,
          "default": 5,
          "description": "Max restart attempts before giving up"
        },
        "restartDelay": {
          "type": "integer",
          "minimum": 1000,
          "default": 5000,
          "description": "Delay after restart before checking health (ms)"
        },
        "notifyOnRestart": {
          "type": "boolean",
          "default": true,
          "description": "Show notification when Ollama is restarted"
        }
      }
    },
    "launcher": {
      "type": "object",
      "description": "Launcher behavior configuration",
      "properties": {
        "preferWindowsTerminal": {
          "type": "boolean",
          "default": true,
          "description": "Prefer Windows Terminal over PowerShell"
        },
        "terminalProfile": {
          "type": "string",
          "default": "Gemini CLI (HYDRA)",
          "description": "Windows Terminal profile name"
        },
        "cleanLocksOnStart": {
          "type": "boolean",
          "default": true,
          "description": "Clean stale lock files on startup"
        },
        "showBanner": {
          "type": "boolean",
          "default": true,
          "description": "Show ASCII banner on startup"
        },
        "yoloMode": {
          "type": "boolean",
          "default": false,
          "description": "Enable YOLO mode by default"
        }
      }
    },
    "logging": {
      "type": "object",
      "description": "Logging configuration",
      "properties": {
        "level": {
          "type": "string",
          "enum": ["debug", "info", "warn", "error"],
          "default": "info",
          "description": "Minimum log level"
        },
        "colorized": {
          "type": "boolean",
          "default": true,
          "description": "Use ANSI colors in output"
        },
        "timestamps": {
          "type": "boolean",
          "default": false,
          "description": "Include timestamps in log messages"
        }
      }
    },
    "paths": {
      "type": "object",
      "description": "Path configurations",
      "properties": {
        "lockDirs": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Directories to clean for stale locks (supports ${VAR} expansion)"
        }
      }
    },
    "features": {
      "type": "object",
      "description": "Feature flags",
      "properties": {
        "autoStartOllama": {
          "type": "boolean",
          "default": true,
          "description": "Automatically start Ollama if not running"
        },
        "autoPullModels": {
          "type": "boolean",
          "default": false,
          "description": "Automatically pull default model if missing"
        },
        "updateCheck": {
          "type": "boolean",
          "default": false,
          "description": "Check for updates on startup"
        }
      }
    }
  }
}
